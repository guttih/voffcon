{"name":"SwitchCtrl","description":"Use this control to turn a pin value off or on.\r\nThis control will display a iphone-like switch which\r\nthe user can click on to turn the pin on or off. ","code":"\"use strict\";\r\n/*\r\nUse this control to turn a pin value off or on.\r\nThis control will display a iphone-like switch which\r\nthe user can click on to turn the pin on or off. \r\n*/\r\nclass SwitchCtrl extends PinControl {\r\n\tconstructor(left, top, pinObject, highestValue){\r\n\t\tvar pinNumber = pinObject.getNumber();\r\n\t\tvar pinValue  = pinObject.getValue();\r\n\t\tif (highestValue === undefined){\r\n\t\t\thighestValue = pinObject.getHigestValue();\r\n\t\t}\r\n\t\tsuper('switch-ctrl', left, top, pinNumber, pinValue, highestValue, pinObject.getDeviceID());\r\n\r\n\t\tthis.setValue(super.getPinValue());\r\n\t\tpinObject.addControl(this);\r\n\t\tthis.pinObject = pinObject;\r\n\t}\r\n\r\n\tgetKnob(){ return $('#' + super.getId() + '> svg > .knob');}\r\n\tgetKnobBackground(){ return $('#' + super.getId() + '> svg > .knob-background');}\r\n\t\r\n\t//if bActivate == false then the pin gecomes grayed show that it is inactivated\r\n\tactive(bActivate){\r\n\t\tif (bActivate === true){\r\n\t\t\tthis.setValue(super.getPinValue());//this will show the state\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//bActivate is false so let's gray everything\r\n\t\tvar fill = '#bbbbbb',\r\n\t\t\tBackfill = '#ffdfdf',\r\n\t\t\tstroke = '#bbbbbb',\r\n\t\t\tcx = 65;\r\n\r\n\t\tthis.getKnob().css({\tfill:fill,\r\n\t\t\t\t\t\t\t\tstroke: stroke});\r\n\t\tthis.getKnob().attr(\"cx\",cx);\r\n\t\tthis.getKnobBackground().css({\tfill:Backfill});\r\n\t}\r\n\t\r\n\t//change state of the UI.  Move button circle and change it's color\r\n\tpower(bSwitchOn){\r\n\t\tvar fill = '#bbbbbb',\r\n\t\t\tBackfill = '#ffffff',\r\n\t\t\tstroke = '#bbbbbb',\r\n\t\t\tcx = 41;\r\n\t\tif (bSwitchOn === true){\r\n\t\t\tfill = '#11cc11';\r\n\t\t\tstroke = '#11cc44';\r\n\t\t\tBackfill = '#ddffdd';\r\n\t\t\tcx = 90;\r\n\t\t}\r\n\r\n\t\tthis.getKnob().css({\tfill:fill,\tstroke: stroke});\r\n\t\tthis.getKnob().attr(\"cx\",cx);\r\n\t\tthis.getKnobBackground().css({\tfill:Backfill});\r\n\t}\r\n\tscale(value){\r\n\t\tsuper.scale($('#' + super.getId() + '> svg'), value);\r\n\t}\r\n\trotate(degrees){\r\n\r\n\t\tsuper.rotate($('#' + super.getId() + '> svg'), degrees);\r\n\t}\r\n\r\n\t\r\n\tsetValue(value){\r\n\t\tsuper.setPinValue(value);\r\n\t\tif (super.getPinValue() > 0){\r\n\t\t\tthis.power(true);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.power(false);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t//register the function to be called when the switchpin ojbect is clicked\r\n\tonClick(inData){\r\n\t\tvar pSwitch = inData.data.that;\r\n\t\tvar val = 0;\r\n\t\tif (pSwitch.getPinValue() === 0){\r\n\t\t\tval = pSwitch.getHigestValue();\r\n\t\t}\r\n\t\tpSwitch.setValue(val);\r\n\t\tinData.data.callback(pSwitch);\r\n\t}\r\n\tregisterClick(callback){\r\n\t\tvar obj = {that:this};\r\n\t\tif (callback !== undefined){\r\n\t\t\tobj['callback'] = callback;\r\n\t\t}\r\n\t\tthis.getKnob().on( \"click\", obj, this.onClick );\r\n\t\t\r\n\t}\r\n\r\n}//class\r\n","template":"<div id=\"switch-ctrl\" class=\"switch-ctrl\" style=\"position:absolute\">\r\n    <svg width=\"131\"  height=\"82\" class=\"control\">\r\n    \t<circle class=\"knob-background\" r=\"40\" cx=\"41\" cy=\"41\" style=\"fill:#ffffff; stroke: #bbbbbb; stroke-width: 1px;\"></circle>\r\n    \t<circle class=\"knob-background\" r=\"40\" cx=\"90\" cy=\"41\" style=\"fill:#ffffff; stroke: #bbbbbb; stroke-width: 1px;\"></circle>\r\n    \t<rect class=\"knob-background\" x=\"41\" y=\"1\" width=\"49\" height=\"80\" style=\"shape-rendering: crispEdges; fill: #ffffff;\"></rect>\r\n    \t<line x1=\"41\" y1=\"1\" x2=\"90\" y2=\"1\" style=\"stroke:#bbbbbb;stroke-width:1\" />\r\n    \t<line x1=\"41\" y1=\"81\" x2=\"90\" y2=\"81\" style=\"stroke:#bbbbbb;stroke-width:1\" />\r\n    \t<circle class=\"knob\" r=\"37\" cx=\"41\" cy=\"41\" style=\"fill:#bbbbbb; stroke: #bbbbbb; stroke-width: 1px;\"></circle>\r\n    </svg>\r\n</div> <!--switch-->"}